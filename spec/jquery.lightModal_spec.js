// Generated by CoffeeScript 1.6.3
(function() {
  var path;

  path = '';

  if (typeof window.__karma__ !== 'undefined') {
    path += 'base/';
  }

  jasmine.getFixtures().fixturesPath = path + 'spec/fixtures';

  describe("Light Modal box plugin", function() {
    beforeEach(function() {
      loadFixtures("modals.html");
      $("#modal_trigger_1").lightModal({
        slideSpeed: 100
      });
      return $("#modal_trigger_2").lightModal({
        onShow: function() {
          return $('#modal2_status').text('showing');
        },
        onHide: function() {
          return $('#modal2_status').text('hidden');
        }
      });
    });
    describe("Initialisation", function() {
      it("should hide the modal", function() {
        expect($("#modal_1")).toBeHidden();
        return expect($("#modal_2")).toBeHidden();
      });
      return it("should add a 'lm-modal' class to the modal box", function() {
        expect($("#modal_1")).toHaveClass("lm-modal");
        return expect($("#modal_2")).toHaveClass("lm-modal");
      });
    });
    describe("Showing", function() {
      beforeEach(function() {
        $("#modal_trigger_1").lightModal('show');
        return $('.lm-modal').stop();
      });
      afterEach(function() {
        return $("#modal_trigger_1").lightModal('hide');
      });
      it("should show the modal", function() {
        expect($("#modal_1")).toBeVisible();
        return expect($("#modal_2")).toBeHidden();
      });
      it("should have an overlay", function() {
        expect($(".lm-overlay")).toBeVisible();
        return expect($(".lm-overlay").size()).toEqual(1);
      });
      return it("should execute the onShow function", function() {
        $("#modal_trigger_2").lightModal('show');
        expect($('#modal2_status').text()).toEqual('showing');
        return $("#modal_trigger_2").lightModal('hide');
      });
    });
    return describe("Hiding", function() {
      beforeEach(function() {
        $("#modal_trigger_1").lightModal('show');
        $("#modal_trigger_1").lightModal('hide');
        $("#modal_trigger_2").lightModal('show');
        $("#modal_trigger_2").lightModal('hide');
        return $('.lm-modal').stop();
      });
      it("should hide the modal", function() {
        waits(200);
        return runs(function() {
          return expect($("#modal_1")).toBeHidden();
        });
      });
      it("should hide the overlay", function() {
        return expect($(".lm-overlay").size()).toEqual(0);
      });
      it("should execute the onHide function", function() {
        return expect($('#modal2_status').text()).toEqual('hidden');
      });
      it("should hide the modal and overlay when the overlay is clicked", function() {
        $("#modal_trigger_1").lightModal('show');
        waits(200);
        return runs(function() {
          $(".lm-overlay").click();
          waits(200);
          return runs(function() {
            expect($("#modal_1")).toBeHidden();
            return expect($(".lm-overlay").size()).toEqual(0);
          });
        });
      });
      return it("should not hide if overlay click should not dismiss", function() {
        $("#modal_trigger_1").lightModal({
          overlayClickDismisses: false
        });
        $("#modal_trigger_1").lightModal('show');
        waits(200);
        return runs(function() {
          $(".lm-overlay").click();
          waits(200);
          return runs(function() {
            expect($("#modal_1")).toBeVisible();
            return expect($(".lm-overlay").size()).toEqual(1);
          });
        });
      });
    });
  });

}).call(this);
